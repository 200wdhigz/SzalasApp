# Przykładowy plik .env dla wdrożenia z Nginx Proxy Manager
# Skopiuj ten plik jako .env i wypełnij wszystkie wartości
#
# WAŻNE:
# - BASE_URL musi być pełnym URL z HTTPS
# - DEBUG musi być False w produkcji
# - SECRET_KEY musi być losowy i długi (min. 32 znaki)

# ============================================================================
# PODSTAWOWA KONFIGURACJA APLIKACJI
# ============================================================================

# URL aplikacji - WAŻNE: musi być HTTPS dla OAuth
# Ten URL musi być zgodny z domeną skonfigurowaną w NPM
BASE_URL=https://szalasapp.kawak.uk

# Klucz sekretny Flask - WYGENERUJ LOSOWY!
# Użyj: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-very-long-and-secure-random-string-min-32-chars-CHANGE-ME

# Debug mode - ZAWSZE False w produkcji!
DEBUG=False

# Port wewnętrzny kontenera (nie zmieniaj)
PORT=8080
HOST=0.0.0.0

# ============================================================================
# GOOGLE CLOUD / FIREBASE
# ============================================================================

# ID projektu Google Cloud
# Znajdziesz w: Google Cloud Console → Dashboard
GOOGLE_PROJECT_ID=your-project-id

# Nazwa bucketa Cloud Storage (bez gs://)
# Znajdziesz w: Cloud Console → Cloud Storage → Browser
GOOGLE_CLOUD_STORAGE_BUCKET_NAME=your-bucket-name

# Google API Key
# Znajdziesz w: Google Cloud Console → APIs & Services → Credentials
GOOGLE_API_KEY=your-google-api-key

# Ścieżka do service account JSON (nie zmieniaj jeśli używasz domyślnej lokalizacji)
GOOGLE_APPLICATION_CREDENTIALS=/app/credentials/service-account.json

# ============================================================================
# reCAPTCHA ENTERPRISE
# ============================================================================

# reCAPTCHA Site Key (klucz publiczny)
# Znajdziesz w: Google Cloud Console → Security → reCAPTCHA Enterprise
RECAPTCHA_SITE_KEY=your-recaptcha-site-key

# reCAPTCHA Project ID (może być taki sam jak GOOGLE_PROJECT_ID)
RECAPTCHA_PROJECT_ID=your-project-id

# ============================================================================
# GOOGLE OAUTH 2.0
# ============================================================================

# Google OAuth Client ID
# Znajdziesz w: Google Cloud Console → APIs & Services → Credentials → OAuth 2.0 Client IDs
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com

# Google OAuth Client Secret
GOOGLE_CLIENT_SECRET=your-client-secret

# WAŻNE: Upewnij się, że w Google Cloud Console masz skonfigurowane:
# Authorized JavaScript origins:
#   https://szalasapp.kawak.uk
#
# Authorized redirect URIs:
#   https://szalasapp.kawak.uk/oauth2callback

# ============================================================================
# SMTP (EMAIL) - Opcjonalne
# ============================================================================

# Serwer SMTP (dla Gmail)
SMTP_SERVER=smtp.gmail.com

# Port SMTP (587 dla TLS, 465 dla SSL)
SMTP_PORT=587

# Adres email nadawcy
SMTP_USERNAME=your-email@gmail.com

# Hasło aplikacji Gmail (nie hasło do konta!)
# Wygeneruj w: Google Account → Security → 2-Step Verification → App passwords
SMTP_PASSWORD=your-gmail-app-password

# UWAGA: Jeśli używasz Gmail:
# 1. Włącz 2-Step Verification w swoim koncie Google
# 2. Wygeneruj App Password (https://myaccount.google.com/apppasswords)
# 3. Użyj wygenerowanego hasła, nie swojego głównego hasła do Gmail

# ============================================================================
# OPCJONALNE USTAWIENIA
# ============================================================================

# Maksymalny rozmiar uploadu (w bajtach)
# 50MB = 52428800
# MAX_CONTENT_LENGTH=52428800

# Timeout dla requestów
# REQUEST_TIMEOUT=60

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# LOG_LEVEL=INFO

# ============================================================================
# INSTRUKCJE GENEROWANIA SECRET_KEY
# ============================================================================

# Metoda 1: Python
# python -c "import secrets; print(secrets.token_urlsafe(32))"

# Metoda 2: OpenSSL
# openssl rand -base64 32

# Metoda 3: PowerShell (Windows)
# -join ((65..90) + (97..122) + (48..57) | Get-Random -Count 32 | % {[char]$_})

# Metoda 4: Online generator
# https://randomkeygen.com/ (użyj "CodeIgniter Encryption Keys")

# ============================================================================
# WERYFIKACJA KONFIGURACJI
# ============================================================================

# Po wypełnieniu pliku .env, sprawdź czy:
# 1. BASE_URL to pełny URL z https://
# 2. SECRET_KEY jest długi i losowy
# 3. DEBUG=False
# 4. Wszystkie Google Cloud credentials są wypełnione
# 5. OAuth redirect URIs w Google Cloud są zgodne z BASE_URL
# 6. SMTP credentials są poprawne (jeśli używasz email)

# Uruchom aplikację:
# docker compose -f docker-compose.npm.yml up -d --build

# Sprawdź logi:
# docker compose -f docker-compose.npm.yml logs -f

# Test health check:
# docker exec szalasapp curl http://localhost:8080/health

