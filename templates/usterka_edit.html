{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h3 class="mb-0">Zarządzanie Usterką: #{{ usterka.id }}</h3>
        </div>
        <div class="card-body">

            <p><strong>ID Sprzętu:</strong>
                <a href="{{ url_for('views.sprzet_card', sprzet_id=usterka.sprzet_id) }}" class="text-primary">{{ usterka.sprzet_id }}</a>
            </p>
            <p><strong>Zgłoszono przez:</strong> {{ usterka.zgloszono_przez }}</p>
            <p><strong>Data zgłoszenia:</strong> {{ usterka.data_zgloszenia }}</p>
            <p class="alert alert-info"><strong>Opis:</strong> {{ usterka.opis }}</p>

            <hr>

            <form method="POST">
                <div class="mb-3">
                    <label for="status" class="form-label">Nowy Status:</label>
                    <select class="form-select" id="status" name="status" required>
                        <option value="oczekuje" {% if usterka.status == 'oczekuje' %}selected{% endif %}>Oczekuje na akceptację</option>
                        <option value="w trakcie" {% if usterka.status == 'w trakcie' %}selected{% endif %}>W trakcie naprawy</option>
                        <option value="naprawiona" {% if usterka.status == 'naprawiona' %}selected{% endif %}>Naprawiona</option>
                        <option value="odrzucona" {% if usterka.status == 'odrzucona' %}selected{% endif %}>Odrzucona (np. błędne zgłoszenie)</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="uwagi_admina" class="form-label">Uwagi Administratora (opcjonalnie):</label>
                    <textarea class="form-control" id="uwagi_admina" name="uwagi_admina" rows="3">{{ usterka.uwagi_admina if usterka.uwagi_admina else '' }}</textarea>
                </div>

                <div class="d-flex justify-content-between">
                    <button type="submit" class="btn btn-success">Zapisz Zmiany</button>
                    <a href="{{ url_for('views.usterki_list') }}" class="btn btn-secondary">Anuluj i Wróć</a>
                </div>
            </form>

        </div>
    </div>
</div>
{% endblock %}
